

<!DOCTYPE html>
<html class="writer-html5" lang="ko" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Modules &mdash; Leggiero  문서</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="색인" href="../genindex.html" />
    <link rel="search" title="검색" href="../search.html" />
    <link rel="next" title="Application Module" href="41_mod_application.html" />
    <link rel="prev" title="Windows PC Platform" href="33_platform_WinPC.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Leggiero
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Leggiero</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="00_introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="00_introduction.html#leggiero">Leggiero</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="10_dependency.html">Dependency</a><ul>
<li class="toctree-l2"><a class="reference internal" href="10_dependency.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_dependency.html#id1">Visual Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_dependency.html#android">Android</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_dependency.html#ios">iOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_dependency.html#other-dependencies">Other Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="11_getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="11_getting_started.html#engine-setup">Engine Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="11_getting_started.html#build-and-try-legtoy">Build and try LegToy</a></li>
<li class="toctree-l2"><a class="reference internal" href="11_getting_started.html#start-with-a-new-project">Start with a NEW project</a></li>
<li class="toctree-l2"><a class="reference internal" href="11_getting_started.html#notes-for-android-release-build">Notes for Android Release Build</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="18_changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="18_changelog.html#v0-9-0-current">v0.9.0 (current)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="19_known_issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="21_concepts_and_architecture.html">Concept and Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="21_concepts_and_architecture.html#a-bird-s-eye-view">A Bird’s-eye View</a></li>
<li class="toctree-l2"><a class="reference internal" href="21_concepts_and_architecture.html#technical-decision-background">Technical Decision Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="21_concepts_and_architecture.html#roadmap">Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="21_concepts_and_architecture.html#personal-comment">Personal Comment</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="30_platforms.html">Platforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="30_platforms.html#supported-platforms">Supported Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="30_platforms.html#comparison">Comparison</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="31_platform_iOS.html">iOS Platform</a><ul>
<li class="toctree-l2"><a class="reference internal" href="31_platform_iOS.html#supporting-details">Supporting Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="31_platform_iOS.html#development-environment">Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="31_platform_iOS.html#libraries">Libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="32_platform_Android.html">Android Platform</a><ul>
<li class="toctree-l2"><a class="reference internal" href="32_platform_Android.html#supporting-details">Supporting Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="32_platform_Android.html#development-environment">Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="32_platform_Android.html#libraries">Libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="33_platform_WinPC.html">Windows PC Platform</a><ul>
<li class="toctree-l2"><a class="reference internal" href="33_platform_WinPC.html#development-environment">Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="33_platform_WinPC.html#libraries">Libraries</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#component-and-module-interface">Component and Module Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#game-creation">Game Creation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="41_mod_application.html">Application Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="41_mod_application.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="41_mod_application.html#application-component">Application Component</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="42_mod_filesystem.html">File System Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="42_mod_filesystem.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="42_mod_filesystem.html#bundle-file-resource-component">Bundle File Resource Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="42_mod_filesystem.html#file-system-path-component">File System Path Component</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="43_mod_graphics.html">Graphics Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="43_mod_graphics.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="43_mod_graphics.html#graphics-module-interface">Graphics Module Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="43_mod_graphics.html#graphic-resource-manager-component">Graphic Resource Manager Component</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="44_mod_input.html">Input Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="44_mod_input.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="44_mod_input.html#touch-input-component">Touch Input Component</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="45_mod_sound.html">Sound Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="45_mod_sound.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="45_mod_sound.html#sound-provider">Sound Provider</a></li>
<li class="toctree-l2"><a class="reference internal" href="45_mod_sound.html#sound-mixer-component">Sound Mixer Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="45_mod_sound.html#bgm-player-component">BGM Player Component</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="46_mod_log.html">Log Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="46_mod_log.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="46_mod_log.html#logger-and-log-writer">Logger and Log Writer</a></li>
<li class="toctree-l2"><a class="reference internal" href="46_mod_log.html#log-module-interface">Log Module Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="47_mod_task.html">Task Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="47_mod_task.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="47_mod_task.html#task-manager-component">Task Manager Component</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="48_mod_font.html">Font Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="48_mod_font.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="48_mod_font.html#font-module-interface">Font Module Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="48_mod_font.html#glyph-manager-component">Glyph Manager Component</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="49_mod_crypto.html">Cryptography Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="49_mod_crypto.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="49_mod_crypto.html#cryptography-module-interface">Cryptography Module Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="50_mod_http.html">HTTP Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="50_mod_http.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="50_mod_http.html#http-module-interface">HTTP Module Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="50_mod_http.html#async-http-component">Async HTTP Component</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="51_mod_legacyui.html">Legacy UI Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="51_mod_legacyui.html#module-common-information">Module Common Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="51_mod_legacyui.html#basic-concepts-and-ui-object">Basic Concepts and UI Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="51_mod_legacyui.html#ui-manager">UI Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="51_mod_legacyui.html#ui-scene-base">UI Scene Base</a></li>
<li class="toctree-l2"><a class="reference internal" href="51_mod_legacyui.html#ui-description">UI Description</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Others</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="80_tools.html">Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="80_tools.html#project-creator">Project Creator</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="91_license.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="91_license.html#leggiero">Leggiero</a></li>
<li class="toctree-l2"><a class="reference internal" href="91_license.html#libraries">Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="91_license.html#legtoy">LegToy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="92_library_usage.html">Library Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="92_library_usage.html#leggiero">Leggiero</a></li>
<li class="toctree-l2"><a class="reference internal" href="92_library_usage.html#legtoy">LegToy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="93_acknowledgement.html">Acknowledgement</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Leggiero</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Modules</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/docs/40_modules.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="modules">
<h1>Modules<a class="headerlink" href="#modules" title="제목 주소">¶</a></h1>
<p>Leggiero는 엔진의 기능들을 모듈 단위로 나누어 제공합니다.
각 모듈은 기본적으로 독립성을 가지며, 다른 모듈의 구성요소에 의존성이 존재하는 경우 인터페이스를 통해 명시적으로 표시해야 합니다.</p>
<div class="section" id="component-and-module-interface">
<h2>Component and Module Interface<a class="headerlink" href="#component-and-module-interface" title="제목 주소">¶</a></h2>
<p>Leggiero에서는 엔진 모듈의 구성요소에 대한 접근을 <strong>엔진 컴퍼넌트</strong> 와 <strong>모듈 인터페이스</strong> 로 표준화합니다.</p>
<dl class="simple">
<dt>엔진 컴퍼넌트</dt><dd><p>엔진 컴퍼넌트는 내부적으로 상태를 가질 수 있는, 게임 프로그램 객체의 구성요소입니다.</p>
</dd>
<dt>모듈 인터페이스</dt><dd><p>모듈 인터페이스는 개념적인 상태를 가지지 않는, 모듈에서 제공하는 API들을 대표하는 접근 인터페이스입니다.</p>
</dd>
</dl>
<p>각 엔진 모듈은 엔진 컴퍼넌트, 또는 모듈 인터페이스를 한 개 이상 제공할 수 있습니다.</p>
<div class="section" id="engine-component">
<h3>Engine Component<a class="headerlink" href="#engine-component" title="제목 주소">¶</a></h3>
<p>엔진 컴퍼넌트는 모듈에서 제공하는, 상태를 가질 수 있는 단위 기능을 대표합니다.
Leggiero의 엔진에서 구성되는 게임 객체는 엔진 컴퍼넌트를 포함할 수 있는 <em>엔티티</em> 객체로, 소속 컴퍼넌트들이 제공하는 엔진 기능을 이용하는 게임 개발 환경을 제공하게 됩니다.</p>
<p>엔진 컴퍼넌트의 인터페이스는 Common/Engine 프로젝트의 <em>Module/EngineComponent.h</em> 헤더 파일에서 살펴볼 수 있습니다.</p>
<p>각 컴퍼넌트는 아래 인터페이스를 통해 의존하는 (인터페이스로 대표되는) 모듈과 다른 엔진 컴퍼넌트를 명시할 수 있습니다.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">part of EngineComponent.h</span><a class="headerlink" href="#id1" title="이 코드에 대한 퍼머링크">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Get type Id list of dependent modules needed by this component</span>
<span class="k">virtual</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">EngineModuleIdType</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">GetDependentModules</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

<span class="c1">// Get type Id list of dependent components needed by this component</span>
<span class="k">virtual</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">EngineComponentIdType</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">GetDependentComponents</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</pre></div>
</div>
</div>
<p>엔진 컴퍼넌트의 초기화 시점에, Leggiero는 컴퍼넌트에 필요한 모듈이 초기화 되지 않았거나, 의존하는 컴퍼넌트가 존재하지 않는 경우, 또는 컴퍼넌트가 순환 의존성을 가지는 경우 등의 문제가 발생할 수 있는 상황에 대해 에러를 발생시킵니다.</p>
<p>엔진 컴퍼넌트는, 생성 시점에 초기화 되지 않습니다. 아래의 인터페이스가 컴퍼넌트의 초기화와 정리를 담당합니다. Leggiero는 게임 객체를 생성하고 초기화할 때, 적절한 시점에 컴퍼넌트의 초기화 인터페이스를 호출합니다.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">part of EngineComponent.h</span><a class="headerlink" href="#id2" title="이 코드에 대한 퍼머링크">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Initialize the Component</span>
<span class="k">virtual</span> <span class="kt">void</span> <span class="nf">InitializeComponent</span><span class="p">(</span><span class="n">Engine</span><span class="o">::</span><span class="n">GameProcessAnchor</span> <span class="o">*</span><span class="n">gameAnchor</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="c1">// Safely Shutdown Component</span>
<span class="k">virtual</span> <span class="kt">void</span> <span class="nf">ShutdownComponent</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p>엔진 컴퍼넌트가 의존하는 다른 컴퍼넌트는, 아래의 인터페이스를 이용해 의존성 주입 방식으로 컴퍼넌트에 전달됩니다.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">part of EngineComponent.h</span><a class="headerlink" href="#id3" title="이 코드에 대한 퍼머링크">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Inject Dependency to the Component.</span>
<span class="c1">// All dependency injections will be done before the initialization.</span>
<span class="k">virtual</span> <span class="kt">void</span> <span class="nf">InjectDependency</span><span class="p">(</span><span class="n">EngineComponentIdType</span> <span class="n">componentId</span><span class="p">,</span> <span class="n">EngineComponent</span> <span class="o">*</span><span class="n">dependentComponent</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">GetDependentComponents</span></code> 에서 명시한 모든 의존 컴퍼넌트에 대한 의존성 주입은 컴퍼넌트의 <code class="docutils literal notranslate"><span class="pre">InitializeComponent</span></code> 함수가 호출되기 전에 완료되며, <code class="docutils literal notranslate"><span class="pre">InjectDependency</span></code> 에 <code class="docutils literal notranslate"><span class="pre">dependentComponent</span></code> 인자로 전달되는 의존 컴퍼넌트는 이미 초기화 ( <code class="docutils literal notranslate"><span class="pre">InitializeComponent</span></code> )가 완료된 상태입니다.</p>
</div>
<div class="section" id="module-interface">
<h3>Module Interface<a class="headerlink" href="#module-interface" title="제목 주소">¶</a></h3>
<p>모듈 인터페이스는, 모듈에서 제공하는 개념적인 상태를 가지지 않는 API들을 대표합니다.</p>
<p>OpenSSL이나 FreeType과 같이, 전역 함수 호출로 동작하는 API라도 내부적으로는 (API 사용자의 입장에서 고려할 필요가 있지는 않은) 상태를 가질 수 있고, 이런 부분에 대해 초기화가 필요한 경우가 있습니다.
모듈 인터페이스는 이와 같은 전역 상태의 생명주기를 Leggiero 엔진 사용자에게 추상화하는 역할을 갖고 있습니다.</p>
<p>한편, 어떤 엔진 모듈은 다른 모듈의 기능에 의존성을 가질 수도 있습니다.
모듈 인터페이스는 모듈 간의 의존성 관계를 명시적으로 정리하고, 의존성을 가지는 모듈 간의 초기화 순서를 조정하는 역할도 가집니다.</p>
<p>모듈 인터페이스의 기반 클래스는 Common/Engine 프로젝트의 <em>Module/EngineModuleInterface.h</em> 헤더 파일에 <code class="docutils literal notranslate"><span class="pre">Leggiero::EngineModuleInterface</span></code> 로 정의되어 있습니다.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">part of EngineModuleInterface.h</span><a class="headerlink" href="#id4" title="이 코드에 대한 퍼머링크">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Get type Id list of dependent modules needed by this module</span>
<span class="k">virtual</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">EngineModuleIdType</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">GetDependentModules</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">InitializeModule</span><span class="p">(</span><span class="n">IPlatformApplication</span> <span class="o">*</span><span class="n">app</span><span class="p">,</span> <span class="n">Engine</span><span class="o">::</span><span class="n">GameProcessAnchor</span> <span class="o">*</span><span class="n">gameAnchor</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">FinalizeModule</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="game-creation">
<h2>Game Creation<a class="headerlink" href="#game-creation" title="제목 주소">¶</a></h2>
<p>Leggiero는 엔진 모듈의 구성요소들이 모여 구성되는 게임에 대한 기본 구현인 <code class="docutils literal notranslate"><span class="pre">Leggiero::Toolbox::Game::ModuledGame</span></code> 클래스를 제공합니다.
해당 클래스는 Common/Engine 프로젝트의 <em>ToolBox/ModuledGame/ModuledGame.h</em> 헤더 파일에서 찾아볼 수 있습니다.</p>
<div class="admonition note">
<p class="admonition-title">참고</p>
<p><code class="docutils literal notranslate"><span class="pre">ModuledGame</span></code> 클래스를 이용하지 않고 <code class="docutils literal notranslate"><span class="pre">Leggiero::Engine::BaseGame</span></code> 클래스를 상속받아 게임 객체를 생성할 수도 있기는 하지만, Leggiero의 기능들을 이용하기 위해서는 엔진 ToolBox의 <code class="docutils literal notranslate"><span class="pre">ModuledGame</span></code> 을 사용하시기를 권장합니다.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ModuledGame</span></code> 을 상속한 게임 클래스에서의 초기화 과정은 LegToy 프로젝트, 또는 Project Creator 툴에 의해 생성된 새 프로젝트에서 확인하실 수 있습니다.</p>
<p>우선, 게임 프로젝트의 <em>GameModules.cpp</em> 파일에서 소스 코드를 살펴봅시다.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">part of GameModules.cpp</span><a class="headerlink" href="#id5" title="이 코드에 대한 퍼머링크">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">EngineModuleIdType</span><span class="p">,</span> <span class="n">EngineModuleInterface</span> <span class="o">*&gt;</span> <span class="n">ModuledGame</span><span class="o">::</span><span class="n">_ListAllModules</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">EngineModuleIdType</span><span class="p">,</span> <span class="n">EngineModuleInterface</span> <span class="o">*&gt;</span> <span class="n">moduleTable</span><span class="p">;</span>

    <span class="n">moduleTable</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kLog</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">GetModuleInterface</span><span class="o">&lt;</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kLog</span><span class="o">&gt;</span><span class="p">()));</span>
    <span class="n">moduleTable</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kHTTP</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">GetModuleInterface</span><span class="o">&lt;</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kHTTP</span><span class="o">&gt;</span><span class="p">()));</span>
    <span class="n">moduleTable</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kCrypto</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">GetModuleInterface</span><span class="o">&lt;</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kCrypto</span><span class="o">&gt;</span><span class="p">()));</span>
    <span class="n">moduleTable</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kGraphics</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">GetModuleInterface</span><span class="o">&lt;</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kGraphics</span><span class="o">&gt;</span><span class="p">()));</span>
    <span class="n">moduleTable</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kFont</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">GetModuleInterface</span><span class="o">&lt;</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kFont</span><span class="o">&gt;</span><span class="p">()));</span>

    <span class="k">return</span> <span class="n">moduleTable</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Leggiero의 계층 구조 상, 아래 계층인 Common 계층의 엔진 코드(Engine 프로젝트)는 상위 계층인 Modules의 각 모듈에 대해 알 수 없습니다.
따라서, Leggiero 엔진 전체보다 상위의 각 게임 프로젝트에서 사용 가능한 전체 모듈을 명시해 주는 작업이 필요합니다.</p>
<p>실제 게임 객체의 생성 및 초기화 과정은 <strong>CreateGame.cpp</strong> 에 정의되어 있습니다.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">part of CreateGame.cpp</span><a class="headerlink" href="#id6" title="이 코드에 대한 퍼머링크">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create a Game Object for LegToy</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">IGame</span><span class="o">&gt;</span> <span class="n">CreateGame</span><span class="p">(</span><span class="n">IPlatformApplication</span> <span class="o">*</span><span class="n">application</span><span class="p">,</span> <span class="n">IGameLaunchOption</span> <span class="o">*</span><span class="n">launchOption</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">LegToy</span><span class="o">::</span><span class="n">Game</span><span class="o">&gt;</span> <span class="n">concreteGame</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">LegToy</span><span class="o">::</span><span class="n">Game</span><span class="o">&gt;</span><span class="p">();</span>

    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">IGameInitializer</span><span class="o">&gt;</span> <span class="n">gameCreator</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">dynamic_pointer_cast</span><span class="o">&lt;</span><span class="n">IGameInitializer</span><span class="o">&gt;</span><span class="p">(</span><span class="n">concreteGame</span><span class="p">);</span>
    <span class="n">gameCreator</span><span class="o">-&gt;</span><span class="n">_InitializeGameEngineLibrary</span><span class="p">(</span><span class="n">application</span><span class="p">);</span>
    <span class="n">gameCreator</span><span class="o">-&gt;</span><span class="n">_AssembleGameEngineComponents</span><span class="p">(</span><span class="n">application</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">concreteGame</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>각 게임 프로젝트는 이 팩토리 함수를 구현해 구체 게임 클래스의 게임 객체를 인스턴스화 하고, 초기화 과정을 수행합니다.
<code class="docutils literal notranslate"><span class="pre">Leggiero::IGameInitializer</span></code> 클래스는 게임의 초기화 과정을 추상화한 공통 인터페이스이며, 해당 인터페이스를 상속한 <code class="docutils literal notranslate"><span class="pre">ModuledGame</span></code> 은 <code class="docutils literal notranslate"><span class="pre">IGameInitializer</span></code> 의 인터페이스에 맞춰 엔진 모듈 구성요소를 포함한 게임 프로그램의 초기화를 수행합니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">ModuledGame</span></code> 의 <code class="docutils literal notranslate"><span class="pre">_InitializeUsingModules</span></code> 와 <code class="docutils literal notranslate"><span class="pre">_RegisterUsingComponents</span></code> 함수에서 실제 게임의 구성 정보를 정의합니다.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">part of CreateGame.cpp</span><a class="headerlink" href="#id7" title="이 코드에 대한 퍼머링크">¶</a></div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//------------------------------------------------------------------------------</span>
<span class="kt">void</span> <span class="n">Game</span><span class="o">::</span><span class="n">_InitializeUsingModules</span><span class="p">(</span><span class="n">Leggiero</span><span class="o">::</span><span class="n">IPlatformApplication</span> <span class="o">*</span><span class="n">application</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">_InitializeModule</span><span class="p">(</span><span class="n">Leggiero</span><span class="o">::</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kLog</span><span class="p">,</span> <span class="n">application</span><span class="p">);</span>
    <span class="n">_InitializeModule</span><span class="p">(</span><span class="n">Leggiero</span><span class="o">::</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kCrypto</span><span class="p">,</span> <span class="n">application</span><span class="p">);</span>
    <span class="n">_InitializeModule</span><span class="p">(</span><span class="n">Leggiero</span><span class="o">::</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kHTTP</span><span class="p">,</span> <span class="n">application</span><span class="p">);</span>
    <span class="n">_InitializeModule</span><span class="p">(</span><span class="n">Leggiero</span><span class="o">::</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kGraphics</span><span class="p">,</span> <span class="n">application</span><span class="p">);</span>
    <span class="n">_InitializeModule</span><span class="p">(</span><span class="n">Leggiero</span><span class="o">::</span><span class="n">EngineModuleIdType</span><span class="o">::</span><span class="n">kFont</span><span class="p">,</span> <span class="n">application</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">//------------------------------------------------------------------------------</span>
<span class="kt">void</span> <span class="n">Game</span><span class="o">::</span><span class="n">_RegisterUsingComponents</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">_RegisterEngineComponent</span><span class="p">(</span><span class="k">new</span> <span class="n">Leggiero</span><span class="o">::</span><span class="n">Graphics</span><span class="o">::</span><span class="n">GraphicResourceManagerComponent</span><span class="p">());</span>
    <span class="n">_RegisterEngineComponent</span><span class="p">(</span><span class="k">new</span> <span class="n">Leggiero</span><span class="o">::</span><span class="n">Input</span><span class="o">::</span><span class="n">TouchInputComponent</span><span class="p">());</span>
    <span class="n">_RegisterEngineComponent</span><span class="p">(</span><span class="n">Leggiero</span><span class="o">::</span><span class="n">FileSystem</span><span class="o">::</span><span class="n">FileSystemPathComponent</span><span class="o">::</span><span class="n">CreateComponentObject</span><span class="p">());</span>
    <span class="n">_RegisterEngineComponent</span><span class="p">(</span><span class="n">Leggiero</span><span class="o">::</span><span class="n">FileSystem</span><span class="o">::</span><span class="n">BundleFileResourceComponent</span><span class="o">::</span><span class="n">CreateComponentObject</span><span class="p">());</span>
    <span class="n">_RegisterEngineComponent</span><span class="p">(</span><span class="k">new</span> <span class="n">Leggiero</span><span class="o">::</span><span class="n">Font</span><span class="o">::</span><span class="n">GlyphManagerComponent</span><span class="p">());</span>
    <span class="n">_RegisterEngineComponent</span><span class="p">(</span><span class="n">Leggiero</span><span class="o">::</span><span class="n">Sound</span><span class="o">::</span><span class="n">SoundMixerComponent</span><span class="o">::</span><span class="n">CreateComponentObject</span><span class="p">());</span>
    <span class="n">_RegisterEngineComponent</span><span class="p">(</span><span class="n">Leggiero</span><span class="o">::</span><span class="n">Sound</span><span class="o">::</span><span class="n">BGMPlayerComponent</span><span class="o">::</span><span class="n">CreateComponentObject</span><span class="p">());</span>

    <span class="n">Leggiero</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">TaskManagerComponent</span> <span class="o">*</span><span class="n">taskManager</span> <span class="o">=</span> <span class="n">Leggiero</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">TaskManagerComponent</span><span class="o">::</span><span class="n">CreateComponentObject</span><span class="p">();</span>
    <span class="n">Leggiero</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">GraphicTask</span><span class="o">::</span><span class="n">EnableGraphicTaskSystem</span><span class="p">(</span><span class="n">taskManager</span><span class="p">);</span>
    <span class="n">_RegisterEngineComponent</span><span class="p">(</span><span class="n">taskManager</span><span class="p">);</span>

    <span class="n">_RegisterEngineComponent</span><span class="p">(</span><span class="k">new</span> <span class="n">Leggiero</span><span class="o">::</span><span class="n">HTTP</span><span class="o">::</span><span class="n">Async</span><span class="o">::</span><span class="n">AsyncTaskHttpComponent</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">_InitializeUsingModules</span></code> 함수 내에서, 게임에서 사용할 모듈을 초기화해야 합니다.
이때, <code class="docutils literal notranslate"><span class="pre">_ListAllModules</span></code> 함수에서 나열한 모듈 중, 특정 모듈의 초기화 과정에서 의존하나 아직 초기화 되지 않은 모듈이 있다면, 의존성을 탐색하여 자동으로 초기화를 수행해 줍니다.
단, 모듈은 순환 의존성을 가질 수 없으며, 순환 의존성을 가지는 모듈을 초기화 하는 순간, 에러가 발생하며 게임은 시작되지 않습니다.</p>
<p><code class="docutils literal notranslate"><span class="pre">_RegisterUsingComponents</span></code> 함수 내에서는, 게임에서 사용할 엔진 컴퍼넌트를 직접 생성하여 등록합니다.
일부 컴퍼넌트는 생성 과정에서 게임에 맞는 설정을 수행할 수 있는 경우가 있고, 이 경우 필요한 설정을 마친 후 컴퍼넌트를 등록해야 합니다.
등록된 컴퍼넌트는 <code class="docutils literal notranslate"><span class="pre">_RegisterUsingComponents</span></code> 함수의 반환 후, 의존성 탐색 및 해결을 수행하며 적절한 순서로 초기화됩니다.
단, 엔진 컴퍼넌트는 순환 의존성을 가질 수 없고, 엔진 컴퍼넌트에서 필요로 하는 모듈은 <code class="docutils literal notranslate"><span class="pre">_InitializeUsingModules</span></code> 함수에서 직간접적으로 초기화 된 상태이어야 합니다.</p>
<div class="admonition important">
<p class="admonition-title">중요</p>
<p>Application 컴퍼넌트는 <code class="docutils literal notranslate"><span class="pre">_RegisterUsingComponents</span></code> 함수에서 등록하지 않습니다. Application 컴퍼넌트는 게임의 어플리케이션 그 자체를 추상화하는 컴퍼넌트로, Leggiero 엔진에 의해 등록됩니다.</p>
</div>
<p>게임 종료 시, 엔진 컴퍼넌트 및 초기화된 모듈의 종료 순서는 초기화 순서의 역순에 준합니다.
즉, 어떤 모듈이 다른 모듈에 의존한다면, 해당 모듈이 정리되는 시점에 의존 대상 모듈은 아직 정리 과정이 수행되지 않았음을 보장합니다.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="41_mod_application.html" class="btn btn-neutral float-right" title="Application Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="33_platform_WinPC.html" class="btn btn-neutral float-left" title="Windows PC Platform" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; 저작권 2021, Kim, Young Soo

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>